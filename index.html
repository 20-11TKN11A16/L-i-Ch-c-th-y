<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="tkn.ico">
  <title>Lời chúc từ A16</title>
  <style>
    html,body{height:100%;margin:0;background:#000}
    .video-wrap{display:flex;align-items:center;justify-content:center;height:100vh;overflow:hidden}
    video{max-width:100vw;max-height:100vh;object-fit:contain;background:#000}
    .controls{position:fixed;left:8px;bottom:8px;display:flex;gap:8px;align-items:center}
    .btn{background:rgba(0,0,0,.5);color:#fff;border:1px solid rgba(255,255,255,.08);padding:8px 10px;border-radius:6px;cursor:pointer;font-family:system-ui,Segoe UI,Roboto,Arial}
    .title{position:fixed;left:12px;top:10px;color:#fff;font-family:system-ui,Segoe UI,Roboto,Arial}
    .notice{position:fixed;right:12px;top:10px;color:#eee;background:rgba(255,255,255,.04);padding:8px 10px;border-radius:6px;font-family:system-ui,Segoe UI,Roboto,Arial}
    .error{color:#ffb4b4}
    .btn:focus{outline:2px solid rgba(255,255,255,.15)}
  </style>
</head>
<body>
  <div class="video-wrap">
    <!-- Đặt tệp video GiaoVienNam.mp4 cùng thư mục với file này -->
    <video id="player" playsinline preload="auto" controls autoplay>
      <source src="giaoviennam.mp4" type="video/mp4" />
      Trình duyệt của bạn không hỗ trợ thẻ video.
    </video>
  </div>

  <div class="title"></div>
  <div class="controls" aria-hidden="false">
    <button id="playBtn" class="btn" type="button">Play/Pause (Space)</button>
    <button id="muteBtn" class="btn" type="button">Mute/Unmute (M)</button>
    <button id="fsBtn" class="btn" type="button">Fullscreen (F)</button>
    <button id="openBtn" class="btn" type="button">Open in new tab</button>
  </div>

  <div id="notice" class="notice" role="status" aria-live="polite">Ready</div>

  <script>
    const player = document.getElementById('player');
    const playBtn = document.getElementById('playBtn');
    const muteBtn = document.getElementById('muteBtn');
    const fsBtn = document.getElementById('fsBtn');
    const openBtn = document.getElementById('openBtn');
    const notice = document.getElementById('notice');

    function setNotice(text, isError = false){
      notice.textContent = text;
      notice.classList.toggle('error', !!isError);
    }

    playBtn.addEventListener('click', () => togglePlay());
    muteBtn.addEventListener('click', () => { player.muted = !player.muted; updateButtons(); });
    fsBtn.addEventListener('click', () => toggleFullscreen());
    openBtn.addEventListener('click', () => openInNewTab());

    function togglePlay(){
      try{
        if(player.paused) player.play(); else player.pause();
      }catch(err){
        console.error('Play error:', err);
        setNotice('Could not start playback: ' + (err && err.message ? err.message : err), true);
      }
      updateButtons();
    }

    function toggleFullscreen(){
      if(window.top !== window.self){
        setNotice('Page is embedded in a frame — fullscreen may be blocked.', true);
      }
      const el = player;
      try{
        if(document.fullscreenElement){
          if(document.exitFullscreen) document.exitFullscreen();
        } else {
          if(el.requestFullscreen) el.requestFullscreen();
        }
        setNotice('Toggling fullscreen...');
      }catch(err){
        console.error('Fullscreen error:', err);
        setNotice('Could not enter fullscreen. ' + (err.message || ''), true);
      }
    }

    function openInNewTab(){
      const src = (player.querySelector('source') || {}).src || 'GiaoVienNam.mp4';
      try{
        const win = window.open(src, '_blank');
        if(!win) setNotice('Popup blocked. Please allow popups.', true);
        else setNotice('Opened video in new tab.');
      }catch(err){
        console.error('Open new tab error:', err);
        setNotice('Could not open new tab: ' + (err.message || err), true);
      }
    }

    function updateButtons(){
      playBtn.textContent = player.paused ? 'Play (Space)' : 'Pause (Space)';
      muteBtn.textContent = player.muted ? 'Unmute (M)' : 'Mute (M)';
    }

    window.addEventListener('keydown', (e)=>{
      const tag = document.activeElement && document.activeElement.tagName;
      if(tag === 'INPUT' || tag === 'TEXTAREA' || document.activeElement && document.activeElement.isContentEditable) return;
      if(e.code === 'Space'){ e.preventDefault(); togglePlay(); }
      if(e.key === 'm' || e.key === 'M'){ player.muted = !player.muted; updateButtons(); }
      if(e.key === 'f' || e.key === 'F'){ toggleFullscreen(); }
    });

    player.addEventListener('play', ()=>{ updateButtons(); setNotice('Playing'); });
    player.addEventListener('pause', ()=>{ updateButtons(); setNotice('Paused'); });
    player.addEventListener('volumechange', updateButtons);

    window.addEventListener('load', ()=>{
      if(window.top !== window.self){
        setNotice('This page is embedded; fullscreen may be blocked.', true);
      } else {
        setNotice('Auto-playing video with sound...');
        try { player.play().then(()=>setNotice('Playing automatically with sound')).catch(err=>setNotice('Autoplay blocked: ' + err.message, true)); } catch(err){ setNotice('Autoplay error: ' + err.message, true); }
      }
    });
  </script>
</body>
</html>



